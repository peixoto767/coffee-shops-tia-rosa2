# -*- coding: utf-8 -*-
"""Modelo de Relat√≥rio para o Trabalho ‚Äì Coffee Shops Tia Rosa

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1pxBBKiO64wuqId7Re8Z6bf-aphvxcx30
"""

# ================================
# Coffee Shops Tia Rosa - Sistema de Gest√£o
# Vers√£o Google Colab
# ================================

# Estruturas principais
produtos = []        # Lista de dicion√°rios: {"nome": str, "preco": float, "estoque": int}
clientes = []        # Lista de dicion√°rios: {"nome": str, "telefone": str, "email": str}
vendas = []          # Lista de dicion√°rios: {"cliente": str, "itens": list, "total": float}

# ================================
# Fun√ß√µes do Sistema
# ================================

def cadastrar_produto():
    print("\n--- Cadastro de Produto ---")
    nome = input("Nome do produto: ")
    preco = float(input("Pre√ßo do produto (R$): "))
    estoque = int(input("Quantidade em estoque: "))
    produtos.append({"nome": nome, "preco": preco, "estoque": estoque})
    print(f"‚úÖ Produto '{nome}' cadastrado com sucesso!\n")

def visualizar_cardapio():
    print("\n--- Card√°pio / Produtos ---")
    if not produtos:
        print("‚ùå Nenhum produto cadastrado.")
    else:
        for i, p in enumerate(produtos, start=1):
            print(f"{i}. {p['nome']} - R${p['preco']:.2f} | Estoque: {p['estoque']}")
    print()

def cadastrar_cliente():
    print("\n--- Cadastro de Cliente ---")
    nome = input("Nome do cliente: ")
    telefone = input("Telefone: ")
    email = input("E-mail: ")
    clientes.append({"nome": nome, "telefone": telefone, "email": email})
    print(f"‚úÖ Cliente '{nome}' cadastrado com sucesso!\n")

def registrar_pedido():
    if not produtos:
        print("\n‚ùå N√£o h√° produtos para vender. Cadastre primeiro.\n")
        return
    if not clientes:
        print("\n‚ùå N√£o h√° clientes cadastrados. Cadastre primeiro.\n")
        return

    print("\n--- Registro de Pedido ---")
    nome_cliente = input("Digite o nome do cliente: ")

    # Verificar se cliente existe
    cliente_encontrado = next((c for c in clientes if c["nome"].lower() == nome_cliente.lower()), None)
    if not cliente_encontrado:
        print("‚ùå Cliente n√£o encontrado. Cadastre primeiro!\n")
        return

    pedido_itens = []
    total = 0.0

    while True:
        visualizar_cardapio()
        escolha = input("Digite o n√∫mero do produto para adicionar ao pedido (ou 0 para finalizar): ")
        if escolha == "0":
            break
        if not escolha.isdigit() or int(escolha) < 1 or int(escolha) > len(produtos):
            print("‚ùå Escolha inv√°lida.")
            continue

        produto = produtos[int(escolha) - 1]
        if produto["estoque"] <= 0:
            print("‚ùå Produto sem estoque!")
            continue

        quantidade = int(input(f"Quantas unidades de '{produto['nome']}' deseja?: "))
        if quantidade > produto["estoque"]:
            print("‚ùå Estoque insuficiente!")
            continue

        # Atualiza estoque e pedido
        produto["estoque"] -= quantidade
        subtotal = quantidade * produto["preco"]
        total += subtotal
        pedido_itens.append({"produto": produto["nome"], "quantidade": quantidade, "subtotal": subtotal})
        print(f"‚úÖ {quantidade}x {produto['nome']} adicionados ao pedido. Subtotal: R${subtotal:.2f}")

    if pedido_itens:
        vendas.append({"cliente": nome_cliente, "itens": pedido_itens, "total": total})
        print(f"\nüí∞ Pedido finalizado para {nome_cliente} | Total: R${total:.2f}\n")
    else:
        print("‚ùå Nenhum item foi adicionado ao pedido.\n")

def visualizar_vendas():
    print("\n--- Vendas do Dia ---")
    if not vendas:
        print("‚ùå Nenhuma venda registrada hoje.")
    else:
        total_vendas = 0
        for i, v in enumerate(vendas, start=1):
            print(f"\nVenda {i} - Cliente: {v['cliente']} | Total: R${v['total']:.2f}")
            for item in v["itens"]:
                print(f"  - {item['quantidade']}x {item['produto']} (R${item['subtotal']:.2f})")
            total_vendas += v["total"]
        print(f"\nüíµ Total de vendas do dia: R${total_vendas:.2f}\n")

# ================================
# Menu Principal
# ================================
def menu():
    while True:
        print("""
========= Coffee Shops Tia Rosa =========
1. Cadastrar Produto
2. Visualizar Card√°pio
3. Cadastrar Cliente
4. Registrar Pedido
5. Visualizar Vendas
0. Sair
""")
        opcao = input("Escolha uma op√ß√£o: ")

        if opcao == "1":
            cadastrar_produto()
        elif opcao == "2":
            visualizar_cardapio()
        elif opcao == "3":
            cadastrar_cliente()
        elif opcao == "4":
            registrar_pedido()
        elif opcao == "5":
            visualizar_vendas()
        elif opcao == "0":
            print("üëã Obrigado por usar o sistema da Coffee Shops Tia Rosa!")
            break
        else:
            print("‚ùå Op√ß√£o inv√°lida. Tente novamente.\n")

# Executa o sistema
menu()

